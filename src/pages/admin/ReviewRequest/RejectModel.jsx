import React, { useState } from 'react';
import { rejectRequestAPI } from '../../../services/arazService';
import { useNavigate } from 'react-router-dom';

const RejectModel = ({ requestData }) => {
  const [comment, setComment] = useState('');
  const navigate = useNavigate();

  const handleReject = async () => {
    try {
      await rejectRequestAPI(requestData?.id, { rejectReason: comment });
      navigate('/admin/dashboard');
      setComment('');
    } catch (e) {
      console.log('error:', e);
    }
  };
  return (
    <div
      className="modal fade reject-modal"
      id="Reject_Button"
      tabIndex="-1"
      role="dialog"
      aria-hidden="true"
    >
      <div
        className="modal-dialog modal-lg modal-dialog-centered"
        role="document"
      >
        <div className="modal-content">
          <div className="modal-header p-4 border-0">
            <div></div>
            <button
              type="button"
              className="btn-close p-0 shadow-none"
              data-bs-dismiss="modal"
              aria-label="Close"
            >
              <svg
                width="22"
                height="22"
                viewBox="0 0 22 22"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M21.5127 0.503977C21.3583 0.349284 21.175 0.226556 20.9731 0.142819C20.7712 0.0590823 20.5548 0.0159799 20.3363 0.0159799C20.1177 0.0159799 19.9013 0.0590823 19.6995 0.142819C19.4976 0.226556 19.3142 0.349284 19.1599 0.503977L11 8.64716L2.84014 0.48729C2.68565 0.3328 2.50224 0.210252 2.30039 0.126642C2.09854 0.0430327 1.88219 1.62782e-09 1.66371 0C1.44523 -1.62782e-09 1.22889 0.0430327 1.02704 0.126642C0.825186 0.210251 0.64178 0.3328 0.48729 0.48729C0.3328 0.64178 0.210251 0.825186 0.126642 1.02704C0.0430327 1.22889 -1.62782e-09 1.44523 0 1.66371C1.62782e-09 1.88219 0.0430327 2.09854 0.126642 2.30039C0.210252 2.50224 0.3328 2.68565 0.48729 2.84014L8.64716 11L0.48729 19.1599C0.3328 19.3144 0.210251 19.4978 0.126642 19.6996C0.0430327 19.9015 0 20.1178 0 20.3363C0 20.5548 0.0430327 20.7711 0.126642 20.973C0.210251 21.1748 0.3328 21.3582 0.48729 21.5127C0.64178 21.6672 0.825186 21.7897 1.02704 21.8734C1.22889 21.957 1.44523 22 1.66371 22C1.88219 22 2.09854 21.957 2.30039 21.8734C2.50224 21.7897 2.68565 21.6672 2.84014 21.5127L11 13.3528L19.1599 21.5127C19.3144 21.6672 19.4978 21.7897 19.6996 21.8734C19.9015 21.957 20.1178 22 20.3363 22C20.5548 22 20.7711 21.957 20.973 21.8734C21.1748 21.7897 21.3582 21.6672 21.5127 21.5127C21.6672 21.3582 21.7897 21.1748 21.8734 20.973C21.957 20.7711 22 20.5548 22 20.3363C22 20.1178 21.957 19.9015 21.8734 19.6996C21.7897 19.4978 21.6672 19.3144 21.5127 19.1599L13.3528 11L21.5127 2.84014C22.1468 2.20604 22.1468 1.13808 21.5127 0.503977Z"
                  fill="#A3A3A3"
                />
              </svg>
            </button>
          </div>
          <div className="modal-body">
            <div className="text-center mb-3">
              <svg
                width="108"
                height="108"
                viewBox="0 0 108 108"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M48.7178 35.4994C47.6942 36.2032 46.8735 37.1637 46.3382 38.2847C45.884 39.1185 45.1239 39.7435 44.2181 40.028C43.3122 40.3126 42.3313 40.2344 41.4819 39.81C40.6325 39.3857 39.981 38.6482 39.6646 37.753C39.3481 36.8578 39.3915 35.8747 39.7856 35.0108C40.7628 33.0465 42.2923 30.9747 44.6573 29.4013C47.0418 27.8034 50.0567 26.875 53.7508 26.875C56.966 26.875 60.4402 27.8278 63.201 29.8997C64.7402 31.0248 65.9884 32.5013 66.8417 34.2062C67.695 35.9112 68.1288 37.7953 68.1069 39.7017C68.1069 44.7493 65.6002 48.1063 63.0886 50.525C62.1602 51.4192 61.139 52.2743 60.2594 53.0073L59.5411 53.6083C58.7838 54.2206 58.0733 54.8886 57.4156 55.6068V62.3011C57.4156 63.2731 57.0295 64.2052 56.3422 64.8925C55.6549 65.5798 54.7228 65.9659 53.7508 65.9659C52.7788 65.9659 51.8467 65.5798 51.1594 64.8925C50.4721 64.2052 50.086 63.2731 50.086 62.3011V55.1035C50.086 53.9455 50.4134 52.6408 51.293 51.5072C52.368 50.139 53.6677 48.9809 54.8014 48.0183L55.6956 47.2707L55.7005 47.2658C56.5409 46.567 57.2836 45.9465 57.997 45.2526C59.7952 43.518 60.7774 41.9494 60.7774 39.7017C60.8003 38.9331 60.6319 38.1708 60.2873 37.4834C59.9427 36.796 59.4328 36.2049 58.8033 35.7633C57.4937 34.7811 55.6272 34.2045 53.7508 34.2045C51.3369 34.2045 49.7733 34.7958 48.7178 35.4994ZM58.6372 78.1818C58.6372 79.4778 58.1223 80.7206 57.206 81.637C56.2896 82.5534 55.0467 83.0682 53.7508 83.0682C52.4548 83.0682 51.212 82.5534 50.2956 81.637C49.3792 80.7206 48.8644 79.4778 48.8644 78.1818C48.8644 76.8859 49.3792 75.643 50.2956 74.7266C51.212 73.8103 52.4548 73.2955 53.7508 73.2955C55.0467 73.2955 56.2896 73.8103 57.206 74.7266C58.1223 75.643 58.6372 76.8859 58.6372 78.1818Z"
                  fill="#FF6A6A"
                />
                <path
                  d="M53.75 0C83.4347 0 107.5 24.0653 107.5 53.75C107.5 83.4347 83.4347 107.5 53.75 107.5C24.0653 107.5 0 83.4347 0 53.75C0 24.0653 24.0653 0 53.75 0ZM7.32955 53.75C7.32955 66.0615 12.2203 77.8687 20.9258 86.5742C29.6313 95.2797 41.4385 100.17 53.75 100.17C66.0615 100.17 77.8687 95.2797 86.5742 86.5742C95.2797 77.8687 100.17 66.0615 100.17 53.75C100.17 41.4385 95.2797 29.6313 86.5742 20.9258C77.8687 12.2203 66.0615 7.32955 53.75 7.32955C41.4385 7.32955 29.6313 12.2203 20.9258 20.9258C12.2203 29.6313 7.32955 41.4385 7.32955 53.75Z"
                  fill="#FF6A6A"
                />
              </svg>
            </div>

            <p className="text-center mb-4">
              Are you sure you want to reject <br />
              Request ID: {requestData?.id || ''} ?
            </p>
            <div className="reson-box">
              <label className="mb-3">Provide reason for rejection below</label>
              <textarea
                rows="6"
                className="form-control mb-3"
                placeholder="Type here"
                value={comment}
                onChange={(e) => setComment(e.target.value)}
              ></textarea>
              <div className="text-end">
                <button
                  type="button"
                  disabled={!comment}
                  className="btn btn-danger"
                  onClick={() => handleReject()}
                >
                  Reject
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default RejectModel;
